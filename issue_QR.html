<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Web Bluetooth API デバイス検知</title>
		<link
		  rel="stylesheet"
		  href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.css"
		/>
	
		<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.js"></script>
	</head>
	<body>
		<section class="section">
			<div class="container">
			  <h1 class="title">捜索依頼QR発行</h1>
			  <p>
				<label for="deviceName">デバイスを選択してください</label>
				<select id="deviceName">
				<option value="Leaf_AC02">Leaf_AC02</option>
				<option value="lemon">Lemon</option>
				<option value="strawberry">Strawberry</option>
				<option value="MX Ergo">MX Ergo</option>
				</select>
			  </p>
			  <div class="buttons" style="margin-top: 1.5rem">
				<button
				  class="button is-success is-light"
				  type="button"
				  onclick="onQRgenerateButtonClick()"
				>
				  QR生成
				</button>
			  </div>
			</div>
		  </section>
		<div id="qrOutput">
			<canvas id="qr"></canvas>
		</div>
		
		<script>
			let nameSelect = document.getElementById("deviceName").value;
			var query = `https://123masa123.github.io/minto_apps/co-search.html?devicename=${nameSelect}`;
			// QRコードの生成
			function onQRgenerateButtonClick(){
			(function() {
				var qr = new QRious({
				element: document.getElementById('qr'),
				// 入力した文字列でQRコード生成
				value: query
			});
			qr.background = '#FFF'; //背景色
			qr.backgroundAlpha = 0.8; // 背景の透過率
			qr.foreground = '#6bb6ff'; //QRコード自体の色
			qr.foregroundAlpha = 1.0; //QRコード自体の透過率
			qr.level = 'L'; // QRコードの誤り訂正レベル
			qr.size = 380; // QRコードのサイズ
				// QRコードをflexboxで表示
				document.getElementById('qrOutput').style.display = 'flex';
			})();		
		}
			
		</script>
		
	</body>
      </html>
